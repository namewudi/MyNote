## **客户端：**

1. 端口限制：

   单个ip最多可以建立 65535 TCP连接，受端口号限制（1 ~ 65535），其实可分配给用户进程的端口号只有 1025 ~ 65525，因为0 ~ 1023已经被系统分配给知名端口号（可分配的端口号数量可通过`ip_local_port_range`查看）

2. 文件描述符限制：

   每建立一个TCP连接，我就得分配给你一个文件描述符，linux 对可打开的文件描述符的数量分别作了三个方面的限制。

   1. 系统级：当前系统可打开的最大数量，通过 `cat /proc/sys/fs/file-max` 查看
   2. 用户级：指定用户可打开的最大数量，通过 `cat /etc/security/limits.conf`查看
   3. 进程级：单个进程可打开的最大数量，通过 `cat /proc/sys/fs/nr_open` 查看

3.  线程限制：

   若是传统多线程并发模式，每建立一个TCP连接便创建一个线程，那么TCP连接数量还要受到线程限制。但是可以使用IO 多路复用的方式来创建更多连接，即一个线程可以管理多个 TCP 连接。

4.  内存限制：

   每个TCP连接本身，以及这个连接所用到的缓冲区，都是需要占用一定内存。所以还受到了内存限制

## **服务端**

服务器端主要是监听固定端口的TCP请求，那么根据 **四元组**（源IP，源端口，目标IP，目标端口）的定义，服务器端的目标IP，目标端口固定，所能接受的TCP连接数受到源IP和源端口的限制，那么最多可维持的TCP连接数为 2的32次方 * 2 的16次方个连接（当然这是一个模糊值，因为特殊IP地址需要排除在外，例如广播地址，本机地址啥的）。

除此之外，服务器端的连接还受到了 **内存**、**文件描述符**、**内存资源**和**CPU资源**限制。
